<html>
<head>
  <script>
  window.setInterval(tick, 1000);

  var numTodos = 0;
  var productivity = 0;
  var legalPads = 0;

  function tick () {
    console.log("tick");
    updateDisplay();
    incrementTodos();
  }

  // manual controls
  function userClick () {
    if (numTodos > 0) {
      numTodos -= 1;
      productivity += 1;
    }
    updateDisplay();
  }

  function buyLegalPad () {
    if (productivity >= legalPads) {
      productivity -= legalPads;
      legalPads += 1;
    }
    updateDisplay();
  }

  // update displays
  function updateDisplay () {
    displayNumTodos();
    displayProductivity();
    displayLegalPads();
  }

  function displayNumTodos () {
    let newString = numTodos + " todos";
    document.getElementById("numTodos").innerText = newString;
  }

  function displayProductivity () {
    let newString = productivity + " productivity points";
    document.getElementById("productivity").innerText = newString;
  }

  function displayLegalPads () {
    let newString = legalPads + " legal pads";
    document.getElementById("legalPads").innerText = newString;
    document.getElementById("legalPadButton").disabled = productivity < legalPads;
    document.getElementById("legalPadButton").innerText = "buy a legal pad (" + legalPads + " productivity)";
  }

  // update model
  function incrementTodos () {
    numTodos++;
    numTodos += legalPads;
  }
  </script>
</head>
<body>
  <div id="numTodos"></div>
  <div id="productivity"></div>
  <button onclick="userClick()">push</button>
  <div>
    <div><b>Helpers</b></div>
    <div>
      <div id="legalPads"></div>
      <button id="legalPadButton" onclick="buyLegalPad()"></button>
    </div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</body>
</html>
